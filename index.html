<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- 모바일 기기에서 올바른 화면 비율을 위한 뷰포트 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 학습 분석 리포트 - 김영광 학생</title>
    
    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN 로드 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts (Inter, Noto Sans KR) 로드 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* 기본 바디 스타일 및 폰트 설정 */
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background-color: #f9fafb; /* 부드러운 회색 배경 */
            color: #1f2937; /* 가독성 높은 텍스트 색상 */
            -webkit-font-smoothing: antialiased; /* 폰트 렌더링 최적화 */
            -moz-osx-font-smoothing: grayscale;
        }
        /* 섹션 카드 공통 스타일: 반복되는 Tailwind 클래스를 묶어 코드 간소화 및 유지보수성 향상 */
        .section-card {
            background-color: white;
            border-radius: 0.75rem; /* 12px */
            padding: 1.5rem; /* 24px */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            margin-bottom: 1.5rem; /* 24px */
        }

        /* 인쇄 시 스타일 조정 */
        @media print {
            body {
                background-color: #ffffff; /* 인쇄 시 배경색 제거 */
                color: #000000; /* 인쇄 시 텍스트 색상을 검정으로 */
                -webkit-print-color-adjust: exact; /* 배경색 및 이미지 인쇄 강제 */
                print-color-adjust: exact;
            }
            .section-card {
                box-shadow: none; /* 인쇄 시 그림자 제거 */
                border: 1px solid #e5e7eb; /* 인쇄 시 테두리 추가 */
                margin-bottom: 1rem; /* 인쇄 시 마진 조정 */
                padding: 1rem; /* 인쇄 시 패딩 조정 */
            }
            /* 차트 컨테이너의 높이를 고정하여 겹침 방지 */
            .chart-container {
                height: 300px !important; /* 인쇄 시 차트 높이 고정 */
                max-height: 300px !important; /* 최대 높이도 고정 */
                width: 100% !important; /* 너비는 100% 유지 */
            }
            /* 차트 아래 텍스트 박스의 마진 조정 */
            .chart-info-box {
                margin-top: 1.5rem !important; /* 차트와 겹치지 않도록 위쪽 마진 추가 */
            }
            /* 불필요한 요소 숨기기 (예: 푸터) */
            footer {
                display: none;
            }
        }
    </style>
</head>
<body>

    <main class="max-w-3xl mx-auto p-4 md:p-6">
        <!-- 리포트 제목 및 기간 섹션 -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">김영광 학생 월간 리포트</h1>
            <p class="text-md md:text-lg text-gray-500 mt-2">2025년 7월 학습 분석</p>
            <div class="mt-3 text-sm text-gray-400">
                <p>분석 기간: 2025년 7월 1일 ~ 7월 31일</p>
            </div>
        </div>

        <!-- D-Day 섹션 (반응형 개선) -->
        <section class="section-card p-4 flex flex-col sm:flex-row items-center sm:items-start justify-between text-center sm:text-left">
            <div class="flex items-center mb-3 sm:mb-0 sm:mr-4">
                <span class="text-red-600 font-bold text-3xl sm:text-2xl mr-2 sm:mr-4 flex-shrink-0">D-61</span>
                <p class="text-gray-700 text-sm md:text-base flex-grow">
                    서초중학교의 2학년 2학기 중간고사는 <strong class="text-gray-900 whitespace-nowrap">9월 29일 ~ 9월 30일</strong>입니다.<br class="sm:hidden">
                    영광 학생은 <strong class="text-gray-900 whitespace-nowrap">9월 1일</strong>부터는 시험 대비 학습 계획을 세워 시작하는 것을 추천해요.
                </p>
            </div>
        </section>
        
        <!-- 1. 종합 요약 -->
        <section class="section-card">
            <h2 class="text-xl font-bold mb-3 text-indigo-600">🚀 7월 학습 요약</h2>
            <p class="text-gray-600 mb-4">
                지난 한 달간 영광 학생은 <strong class="text-indigo-600">수학, 과학</strong> 과목을 중심으로 학습했습니다. 
                특히 영광 학생은 <strong class="text-gray-800">인강 수강 후 평가로 문제 풀이까지 엠베스트를 종합적으로 활용</strong>했습니다.  
                <strong class="text-gray-800">2학기 예습을 힘차게 시작</strong>한 점을 크게 <strong class="text-gray-800">칭찬하고 응원합니다.</strong>👍
            </p>
            <div class="flex justify-around text-center text-sm">
                <div>
                    <p class="font-bold text-2xl text-indigo-500">2</p>
                    <p class="text-gray-500">학습 과목</p>
                </div>
                <div>
                    <p class="font-bold text-2xl text-indigo-500">28<span class="text-lg">강</span></p>
                    <p class="text-gray-500">총 수강</p>
                </div>
            </div>
        </section>

        <!-- 2. 과목별 상세 분석 -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">학습 내용 분석</h2>

        <!-- 수학 분석 카드 -->
        <div class="section-card">
            <div class="flex justify-between items-start mb-3">
                <h3 class="text-xl font-bold text-gray-800">🧮 수학</h3>
            </div>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">학습 현황</h4>
                    <p class="text-sm text-gray-600 mt-1">
                        <strong class="text-red-500">'삼각형의 성질'</strong> 단원 평가를 응시하여, 자신의 이해도를 점검했어요. 지금처럼 <strong class="text-blue-600">수강 후 학습 이해도를 점검하는 습관</strong>은 자기주도학습의 밑거름이 될 거예요. 😊
                    </p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI 학습 제안</h4>
                    <p class="text-sm text-gray-600 mt-1">
                    중학교 2학년 2학기 ‘도형 영역’은 많은 학생들이 어려워하는 부분입니다. 특히 <strong class="text-blue-600">닮음의 뜻과 조건, 비와 비례의 관계를 정확히 이해하고 계산에 적용해 보며 '도형의 닮음'</strong> 단원을 대비할 수 있도록 관심 가져 주세요.  
                    </p>
                </div>
            </div>
        </div>

        <!-- 과학 분석 카드 -->
        <div class="section-card">
            <div class="flex justify-between items-start mb-3">
                <h3 class="text-xl font-bold text-gray-800">🔬 과학</h3>
            </div>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">학습 현황</h4>
                    <p class="text-sm text-gray-600 mt-1">
                        <strong class="text-red-500">'동물과 에너지', '물질의 특성'</strong> 단원을 문제 풀이 중심으로 수강했네요. <strong class="text-blue-600">자신에게 필요한 부분만 수강하는 똑똑한 학습 패턴</strong>이 드러납니다. 😍
                    </p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI 학습 제안</h4>
                    <p class="text-sm text-gray-600 mt-1">
                        <strong class="text-red-500">‘물질의 특성’</strong> 단원은 순물질과 혼합물 구분 개념이 다소 추상적이라 어려울 수 있습니다. 아래 체크리스트로 스스로 점검해 보고, 부족한 부분은 개념 강의를 통해 보충할 수 있도록 독려해 주세요.
                    </p>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg mt-3 space-y-2">
                    <label class="flex items-center text-sm cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"><span>밀도를 이용해 혼합물을 분리하는 방법을 설명할 수 있나요?</span></label>
                    <label class="flex items-center text-sm cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"><span>온도와 압력에 따른 기체의 용해도를 설명할 수 있나요?</span></label>
                </div>
            </div>
        </div>

        <!-- 3. 학습 습관 분석 -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">학습 습관 분석</h2>

        <!-- 시간대별 학습 집중도 -->
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">⏰ 시간대별 수강 시간</h3>
            <!-- 반응형 차트 높이 조절 (모바일: h-64, 데스크탑: h-80) -->
            <!-- 차트 컨테이너에 chart-container 클래스 추가 -->
            <div class="w-full h-64 md:h-80 chart-container">
                <canvas id="studyHabitsChart"></canvas>
            </div>
            <!-- 차트 아래 텍스트 박스에 chart-info-box 클래스 추가 -->
            <div class="mt-4 bg-indigo-50 p-4 rounded-lg chart-info-box">
                <p class="font-bold text-lg text-indigo-800">💡 시간 관리 및 학습 시간 추천 </p>
                <p class="text-sm text-indigo-700 mt-3">
                    영광 학생은 주로 <strong class="font-bold">저녁 6시~8시</strong>에 인강을 수강하고 있습니다. 해당 시간에 참여할 수 있는 <strong>스윗타임 배틀에서 친구들과 집중 시간을 경쟁하며 공부의 효율을 올리고, 다양한 상품까지 받을 수 있습니다.</strong>
                    <br><br> 또한 오전 시간을 활용해 수강하는 친구들도 많습니다. 10분이라도 아침 자투리 시간을 활용하는 것은 어떨지 이야기 나눠봐 주세요. <strong class="font-bold">스윗타임 시간 예약은 아침 6시부터 가능합니다!</strong> 😎 
                </p>
            </div>
        </div>
        
    </main>

    <footer class="text-center py-6 text-gray-500 text-sm">
        <p>&copy; 2025 Megastudy. All Rights Reserved.</p>
    </footer>

    <script>
        // DOM이 완전히 로드된 후 스크립트 실행
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- 시간대별 학습 집중도 라인 차트 렌더링 ---
            const renderHabitsChart = () => {
                const ctx = document.getElementById('studyHabitsChart')?.getContext('2d');
                if (!ctx) return; // canvas 요소가 없으면 함수 종료

                // 차트 영역 그라데이션 생성
                const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'rgba(79, 70, 229, 0.4)');
                gradient.addColorStop(1, 'rgba(79, 70, 229, 0)');

                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['06시', '08시', '10시', '12시', '14시', '16시', '18시', '20시', '22시', '24시'],
                        datasets: [{
                            label: '나의 학습 집중도',
                            data: [0, 0, 3, 5, 8, 15, 28, 29, 14, 7], 
                            borderColor: '#4f46e5', // Indigo
                            backgroundColor: gradient,
                            fill: true,
                            tension: 0.4,
                            borderWidth: 3,
                            pointBackgroundColor: '#4f46e5',
                            pointRadius: 4,
                            pointHoverRadius: 6,
                        }, {
                            label: '전체 동학년 평균',
                            data: [3, 5, 2, 3, 13, 25, 28, 25, 9, 3],
                            borderColor: '#a5b4fc', // Light Indigo
                            fill: false,
                            tension: 0.4,
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                        }, {
                            label: '스윗타임 이용자 평균',
                            data: [5, 13, 5, 9, 16, 32, 38, 35, 29, 17], 
                            borderColor: '#facc15', // Yellow-400
                            backgroundColor: '#facc15',
                            fill: false,
                            tension: 0.4,
                            borderWidth: 3,
                            pointRadius: 4,
                            pointBackgroundColor: '#facc15',
                            pointHoverRadius: 6,
                        }]
                    },
                    options: {
                        responsive: true, // 반응형 활성화
                        maintainAspectRatio: false, // 컨테이너 크기에 맞춰 차트 비율 조정
                        plugins: {
                            legend: { position: 'bottom', labels: { usePointStyle: true } },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    label: function(context) { return ` ${context.dataset.label}: ${context.raw}분`; }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    drawBorder: false,
                                    color: '#e5e7eb'
                                },
                                ticks: {
                                    stepSize: 10,
                                    callback: function(value) {
                                        return value + '분';
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            };
            
            renderHabitsChart();
        });
    </script>
</body>
</html>
